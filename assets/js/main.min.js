function initializeApp(){checkLoginState(),initMobileNav(),initSmoothScroll(),initFormValidation(),initDynamicContent(),initAuthModals()}function initMobileNav(){const e=document.getElementById("menu-toggle"),t=document.getElementById("menu");e&&t&&e.addEventListener("click",function(){t.classList.toggle("hidden")});const n=document.getElementById("sidebar-toggle"),o=document.getElementById("sidebar"),i=document.getElementById("sidebar-overlay"),a=document.body;function d(){o&&(o.classList.toggle("sidebar-open"),i&&i.classList.toggle("active"),o.classList.contains("sidebar-open")?a.style.overflow="hidden":a.style.overflow="")}n&&o&&n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),d()}),i&&i.addEventListener("click",function(){o&&o.classList.contains("sidebar-open")&&d()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&o&&o.classList.contains("sidebar-open")&&d()}),window.addEventListener("resize",function(){window.innerWidth>768&&o&&o.classList.contains("sidebar-open")&&(o.classList.remove("sidebar-open"),i&&i.classList.remove("active"),a.style.overflow="")})}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)return;e.preventDefault();const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})})})}function initFormValidation(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",function(e){validateForm(this)||e.preventDefault()})})}function validateForm(e){let t=!0;e.querySelectorAll("[required]").forEach(e=>{e.value.trim()?clearFieldError(e):(showFieldError(e,"This field is required"),t=!1)});return e.querySelectorAll('input[type="email"]').forEach(e=>{e.value&&!isValidEmail(e.value)&&(showFieldError(e,"Please enter a valid email address"),t=!1)}),t}function showFieldError(e,t){clearFieldError(e);const n=document.createElement("div");n.className="error text-error text-sm mt-1",n.textContent=t,e.parentNode.appendChild(n),e.classList.add("border-error")}function clearFieldError(e){const t=e.parentNode.querySelector(".error");t&&t.remove(),e.classList.remove("border-error")}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function initDynamicContent(){const e=document.getElementById("victim-btn"),t=document.getElementById("contributor-btn"),n=document.getElementById("victim-content"),o=document.getElementById("contributor-content");e&&t&&n&&o&&(e.addEventListener("click",function(){n.classList.remove("hidden"),o.classList.add("hidden"),e.className="cta-primary text-[var(--accent-text)] pulse-glow",t.className="cta-outline text-[var(--brand-cyan)]"}),t.addEventListener("click",function(){o.classList.remove("hidden"),n.classList.add("hidden"),t.className="cta-primary text-[var(--accent-text)] pulse-glow",e.className="cta-outline text-[var(--brand-cyan)]"}))}function checkLoginState(){const e=localStorage.getItem("isLoggedIn"),t=(document.getElementById("login-btn"),document.getElementById("signup-btn"),document.getElementById("menu"));if(e&&t){const e=localStorage.getItem("userEmail"),n=localStorage.getItem("userName")||e||"User";t.innerHTML=`\n            <a href="main-app/dashboard.html" class="text-[var(--light-text)] hover:text-[var(--brand-cyan)]">Dashboard</a>\n            <div class="relative group">\n                <button class="text-[var(--light-text)] hover:text-[var(--brand-cyan)] flex items-center">\n                    ${n} \n                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>\n                    </svg>\n                </button>\n                <div class="absolute right-0 mt-2 w-48 bg-[var(--dark-bg)] border border-[var(--brand-cyan)] rounded-lg shadow-lg hidden group-hover:block z-50">\n                    <a href="main-app/profile.html" class="block px-4 py-2 text-[var(--light-text)] hover:bg-[var(--brand-cyan)] hover:text-[var(--accent-text)]">Profile</a>\n                    <a href="#" id="logout-index-btn" class="block px-4 py-2 text-[var(--light-text)] hover:bg-[var(--brand-cyan)] hover:text-[var(--accent-text)]">Logout</a>\n                </div>\n            </div>\n        `;const o=document.getElementById("logout-index-btn");o&&o.addEventListener("click",function(e){e.preventDefault(),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("loginTime"),window.location.reload()})}}function initAuthModals(){const e=document.getElementById("login-btn"),t=document.getElementById("signup-btn"),n=document.getElementById("login-modal"),o=document.getElementById("signup-modal"),i=document.getElementById("close-login-modal"),a=document.getElementById("close-signup-modal"),d=document.getElementById("show-signup"),s=document.getElementById("show-login"),r=document.getElementById("login-form"),l=document.getElementById("signup-form");e&&n&&e.addEventListener("click",function(e){e.preventDefault(),n.classList.remove("hidden"),document.body.style.overflow="hidden"}),t&&o&&t.addEventListener("click",function(e){e.preventDefault(),o.classList.remove("hidden"),document.body.style.overflow="hidden"}),i&&n&&i.addEventListener("click",function(){n.classList.add("hidden"),document.body.style.overflow="auto"}),a&&o&&a.addEventListener("click",function(){o.classList.add("hidden"),document.body.style.overflow="auto"}),d&&n&&o&&d.addEventListener("click",function(e){e.preventDefault(),n.classList.add("hidden"),o.classList.remove("hidden")}),s&&o&&n&&s.addEventListener("click",function(e){e.preventDefault(),o.classList.add("hidden"),n.classList.remove("hidden")}),n&&n.addEventListener("click",function(e){e.target===n&&(n.classList.add("hidden"),document.body.style.overflow="auto")}),o&&o.addEventListener("click",function(e){e.target===o&&(o.classList.add("hidden"),document.body.style.overflow="auto")}),r&&r.addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("login-email").value,n=document.getElementById("login-password").value;if(t&&n){document.getElementById("login-success").classList.remove("hidden"),r.style.display="none",setTimeout(()=>{localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userEmail",t),localStorage.setItem("loginTime",Date.now().toString()),window.location.href="main-app/dashboard.html"},2e3)}}),l&&l.addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("signup-name").value,n=document.getElementById("signup-email").value,o=document.getElementById("signup-password").value,i=document.getElementById("signup-confirm-password").value,a=document.getElementById("signup-terms").checked;if(o===i)if(a){if(t&&n&&o&&i&&a){document.getElementById("signup-success").classList.remove("hidden"),l.style.display="none",setTimeout(()=>{localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userEmail",n),localStorage.setItem("userName",t),localStorage.setItem("loginTime",Date.now().toString()),window.location.href="main-app/dashboard.html"},3e3)}}else showNotification("Please accept the Terms of Service","error");else showNotification("Passwords do not match!","error")})}function initContactForm(){const e=document.getElementById("contact-form"),t=document.getElementById("contact-success");e&&e.addEventListener("submit",function(n){n.preventDefault(),setTimeout(()=>{t&&t.classList.remove("hidden"),e.reset(),setTimeout(()=>{t&&t.classList.add("hidden")},5e3)},1e3)})}function showLoading(e){const t=document.createElement("div");t.className="loading",e.appendChild(t)}function hideLoading(e){const t=e.querySelector(".loading");t&&t.remove()}function showNotification(e,t="info"){const n=document.createElement("div");n.className=`notification ${t} fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50`,n.style.backgroundColor="success"===t?"var(--success-green)":"error"===t?"var(--error-red)":"var(--brand-cyan)",n.style.color="var(--light-text)",n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.remove()},5e3),n.addEventListener("click",()=>{n.remove()})}document.addEventListener("DOMContentLoaded",function(){initializeApp()}),document.addEventListener("DOMContentLoaded",initContactForm),window.TruthRise={showNotification:showNotification,showLoading:showLoading,hideLoading:hideLoading,validateForm:validateForm};